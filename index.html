<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ø¬Ø¯Ø§Ø± | J-DAR Â· Ø³ÙˆÙ¾Ø± Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯</title>
    
    <link rel="manifest" href="data:application/manifest+json,{
        &quot;name&quot;: &quot;J-DAR&quot;,
        &quot;short_name&quot;: &quot;Ø¬Ø¯Ø§Ø±&quot;,
        &quot;start_url&quot;: &quot;/&quot;,
        &quot;display&quot;: &quot;standalone&quot;,
        &quot;background_color&quot;: &quot;#0c0f1c&quot;,
        &quot;theme_color&quot;: &quot;#daa520&quot;
    }">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        :root {
            --primary: #daa520;
            --primary-dark: #b8860b;
            --bg-dark: #0c0f1c;
            --card-bg: rgba(20, 25, 45, 0.7);
            --text-white: #ffffff;
            --text-gray: #aaaaaa;
            --danger: #e6123d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-dark);
            color: var(--text-white);
            line-height: 1.6;
            overflow-x: hidden;
            direction: rtl;
        }

        #particles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; }

        .container { max-width: 500px; margin: 0 auto; padding: 15px 15px 100px; }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(20, 25, 45, 0.8);
            backdrop-filter: blur(15px);
            padding: 12px 20px;
            border-radius: 50px;
            border: 1px solid rgba(218, 165, 32, 0.3);
            margin-bottom: 25px;
            position: sticky;
            top: 10px;
            z-index: 100;
        }

        .logo-box { display: flex; align-items: center; gap: 10px; }
        .logo-circle { width: 40px; height: 40px; background: linear-gradient(45deg, var(--primary-dark), var(--primary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 20px; box-shadow: 0 0 15px var(--primary); }
        .logo-text { font-weight: 800; font-size: 22px; color: var(--primary); letter-spacing: 1px; }

        .header-left { display: flex; gap: 10px; align-items: center; }
        .header-left .icon-btn {
            width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.05);
            border: 1px solid rgba(218,165,32,0.2); display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: 0.2s;
        }
        .header-left .icon-btn:hover { border-color: var(--primary); }

        .wallet-card {
            background: var(--card-bg);
            border: 1px solid rgba(218, 165, 32, 0.2);
            border-radius: 30px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        .balance-label { color: var(--text-gray); font-size: 13px; }
        .balance-value { font-size: 24px; font-weight: bold; color: var(--primary); }

        .action-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-bottom: 30px; }
        .action-btn { 
            background: var(--card-bg); border: 1px solid rgba(255,255,255,0.05); 
            border-radius: 20px; padding: 15px 5px; text-align: center; cursor: pointer;
            transition: 0.3s;
        }
        .action-btn:hover { border-color: var(--primary); transform: translateY(-3px); }
        .action-btn i { font-size: 24px; color: var(--primary); margin-bottom: 8px; display: block; }
        .action-btn span { font-size: 11px; font-weight: 600; }

        .search-bar {
            background: rgba(255,255,255,0.05); border-radius: 15px; padding: 12px 20px;
            display: flex; align-items: center; margin-bottom: 25px; border: 1px solid rgba(218,165,32,0.1);
        }
        .search-bar input { background: transparent; border: none; color: white; flex: 1; outline: none; margin-right: 10px; }

        .category-scroll { display: flex; gap: 10px; overflow-x: auto; padding-bottom: 10px; margin-bottom: 20px; scrollbar-width: none; }
        .cat-chip { background: var(--card-bg); padding: 8px 18px; border-radius: 50px; white-space: nowrap; border: 1px solid rgba(218,165,32,0.2); cursor: pointer; }
        .cat-chip.active { background: var(--primary); color: black; font-weight: bold; }

        .ad-card {
            background: var(--card-bg); border-radius: 20px; overflow: hidden;
            display: flex; margin-bottom: 15px; border: 1px solid rgba(255,255,255,0.05);
            height: 130px; position: relative; cursor: pointer;
            transition: all 0.3s ease;
        }
        .ad-card.special-ad {
            border: 2px solid var(--primary);
            box-shadow: 0 0 20px rgba(218,165,32,0.5);
            background: linear-gradient(145deg, rgba(20,25,45,0.9), rgba(30,35,55,0.9));
        }
        .ad-card.special-ad::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(45deg, #daa520, #f5e56b, #daa520);
            border-radius: 22px;
            z-index: -1;
            animation: goldPulse 2s infinite;
        }
        @keyframes goldPulse {
            0% { opacity: 0.6; }
            50% { opacity: 1; }
            100% { opacity: 0.6; }
        }
        .ad-card .favorite {
            position: absolute; top: 10px; left: 10px; width: 36px; height: 36px;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(5px); border-radius: 50%;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            border: 1px solid rgba(218,165,32,0.4); z-index: 10;
        }
        .ad-card .favorite:hover { background: var(--primary); }
        .ad-img { width: 130px; height: 100%; object-fit: cover; }
        .ad-info { padding: 12px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .ad-title { font-weight: bold; font-size: 15px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
        .ad-price { color: var(--primary); font-weight: bold; font-size: 16px; }
        .ad-meta { font-size: 11px; color: var(--text-gray); }
        .special-badge {
            position: absolute; top: 10px; right: 10px; background: var(--primary); color: black;
            padding: 4px 10px; border-radius: 50px; font-size: 11px; font-weight: bold; z-index: 5;
            box-shadow: 0 0 10px gold;
        }

        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-dark); z-index: 1000; display: none;
            flex-direction: column; overflow-y: auto;
        }
        .modal.active { display: flex; }

        .modal-close-btn {
            position: absolute; top: 15px; right: 15px; width: 40px; height: 40px;
            background: rgba(0,0,0,0.5); border-radius: 50%; color: white;
            display: flex; align-items: center; justify-content: center; z-index: 1010;
            border: none; cursor: pointer;
        }

        .modal-image-container {
            width: 100%;
            height: 350px;
            background: #1a1a1a;
            position: relative;
            overflow: hidden;
        }
        .modal-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
        }
        .more-images-btn {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            border: 1px solid var(--primary);
            backdrop-filter: blur(5px);
            cursor: pointer;
            z-index: 10;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .modal-watermark {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(218,165,32,0.7);
            color: white;
            padding: 4px 12px;
            border-radius: 30px;
            backdrop-filter: blur(4px);
            z-index: 10;
        }

        .modal-content-padding { padding: 20px; }
        .modal-title-main { font-size: 22px; font-weight: bold; margin-bottom: 10px; }
        .modal-sub-text { color: var(--text-gray); font-size: 14px; margin-bottom: 25px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 15px; }

        .info-row {
            display: flex; justify-content: space-between; padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 15px;
        }
        .info-row .label { color: var(--text-gray); }
        .info-row .value { color: var(--text-white); font-weight: 500; }

        .description-box { margin-top: 25px; line-height: 1.8; color: #ddd; font-size: 15px; }

        .review-section { margin-top: 30px; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 20px; }
        .review-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .review-header .avg { font-size: 24px; font-weight: bold; color: var(--primary); }
        .review-header .stars { color: var(--primary); font-size: 18px; }
        .review-header .count { color: var(--text-gray); }
        .review-item {
            background: rgba(255,255,255,0.03); border-radius: 15px; padding: 15px; margin-bottom: 15px;
        }
        .review-item .user { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; }
        .review-item .user i { background: var(--primary); width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        .review-item .rating-stars { color: var(--primary); margin-bottom: 5px; }
        .review-item .comment { color: #ddd; margin-bottom: 5px; }
        .review-item .date { font-size: 11px; color: var(--text-gray); }
        .review-input { display: flex; flex-direction: column; gap: 10px; margin-top: 20px; }
        .review-input input, .review-input textarea {
            background: rgba(0,0,0,0.3); border: 1px solid rgba(218,165,32,0.2);
            border-radius: 12px; padding: 12px 15px; color: white; resize: none;
        }
        .review-input button {
            background: var(--primary); border: none; border-radius: 12px; padding: 12px;
            color: black; font-weight: bold; cursor: pointer;
        }

        .modal-footer {
            padding: 15px 20px 30px; background: #111422;
            border-top: 1px solid rgba(255,255,255,0.1);
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px;
        }
        .btn-main { padding: 14px; border-radius: 12px; font-weight: bold; text-align: center; text-decoration: none; font-size: 16px; border: none; cursor: pointer; }
        .btn-call { background: var(--danger); color: white; }
        .btn-wa { background: #25D366; color: white; }
        .btn-telegram { background: #0088cc; color: white; }
        .btn-disabled {
            opacity: 0.4;
            pointer-events: none;
        }

        .page { display: none; }
        .page.active { display: block; }

        .profile-section {
            background: var(--card-bg); border-radius: 30px; padding: 20px;
            border: 1px solid rgba(218,165,32,0.2);
        }
        .profile-field { margin-bottom: 20px; }
        .profile-field label { display: block; color: var(--primary); margin-bottom: 5px; font-size: 14px; }
        .profile-field input, .profile-field select {
            width: 100%; padding: 12px 15px; background: rgba(0,0,0,0.3);
            border: 1px solid rgba(218,165,32,0.2); border-radius: 15px; color: white;
        }
        .copy-link-row { display: flex; gap: 8px; }
        .copy-link-row input { flex: 1; }
        .share-btn {
            width: 45px; height: 45px; border-radius: 15px; background: rgba(218,165,32,0.2);
            border: 1px solid var(--primary); display: flex; align-items: center; justify-content: center;
            cursor: pointer;
        }
        .save-profile {
            background: var(--primary); border: none; border-radius: 30px; padding: 14px;
            width: 100%; color: black; font-weight: bold; cursor: pointer; margin-top: 10px;
        }

        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%; max-width: 500px;
            left: 50%; transform: translateX(-50%);
            background: rgba(20, 25, 45, 0.9); backdrop-filter: blur(20px);
            display: flex; justify-content: space-around; padding: 12px 0;
            border-top: 1px solid rgba(218, 165, 32, 0.2); z-index: 100;
            border-radius: 30px 30px 0 0;
        }
        .nav-item { text-align: center; color: var(--text-gray); cursor: pointer; flex: 1; transition: 0.3s; }
        .nav-item.active { color: var(--primary); }
        .nav-item i { font-size: 22px; display: block; margin-bottom: 4px; }
        .nav-item span { font-size: 11px; }

        .gallery-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 2000; display: none;
            align-items: center; justify-content: center;
        }
        .gallery-modal.active { display: flex; }
        .gallery-content { max-width: 500px; width: 100%; position: relative; }
        .gallery-back {
            position: absolute; top: -50px; left: 20px; width: 40px; height: 40px;
            background: rgba(255,255,255,0.2); border: 2px solid white; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; color: white; cursor: pointer;
        }
        .gallery-image { width: 100%; border-radius: 20px; border: 3px solid var(--primary); }
        .gallery-controls { display: flex; justify-content: space-between; margin-top: 20px; color: white; }
        .gallery-nav { width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        .gallery-watermark {
            position: absolute; bottom: 20px; right: 20px; background: rgba(218,165,32,0.7);
            color: white; padding: 6px 15px; border-radius: 40px; backdrop-filter: blur(4px);
        }

        .telegram-warning {
            background: #ffc107; color: #000; text-align: center; padding: 10px;
            border-radius: 50px; margin-bottom: 15px; display: none;
        }
        .telegram-warning.show { display: block; }
    </style>
</head>
<body>

    <canvas id="particles"></canvas>

    <div class="container">
        <div class="telegram-warning" id="telegramWarning">
            âš ï¸ Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©ØŒ ÙŠØ±Ø¬Ù‰ ÙØªØ­ Ø§Ù„Ø¨ÙˆØª Ù…Ø¨Ø§Ø´Ø±Ø©
        </div>

        <header class="app-header">
            <div class="logo-box">
                <div class="logo-circle"><i class="fas fa-bolt"></i></div>
                <div class="logo-text">J-DAR</div>
            </div>
            <div class="header-left">
                <div class="icon-btn" id="langMainBtn"><i class="fas fa-globe"></i></div>
                <div class="icon-btn" id="supportBtn"><i class="fas fa-headset"></i></div>
            </div>
        </header>

        <div id="homePage" class="page active">
            <div class="wallet-card">
                <div>
                    <div class="balance-label" data-i18n="balance">Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„</div>
                    <div class="balance-value"><span id="walletBalance">0</span> <small style="font-size: 12px;">ØªÙˆÙ…Ø§Ù†</small></div>
                </div>
                <div style="text-align: left;">
                    <div class="balance-label" data-i18n="points">Ø§Ù…ØªÛŒØ§Ø² ÙˆÙØ§Ø¯Ø§Ø±ÛŒ</div>
                    <div style="font-weight: bold; color: #fff;"><i class="fas fa-star" style="color: gold;"></i> <span id="userPoints">0</span></div>
                </div>
            </div>

            <div class="action-grid">
                <div class="action-btn" id="postAdBtn"><i class="fas fa-plus-circle"></i><span data-i18n="post_ad">Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ</span></div>
                <div class="action-btn" id="vipBtn"><i class="fas fa-crown"></i><span data-i18n="vip_subscription">VIP</span></div>
                <div class="action-btn" id="chargeBtn"><i class="fas fa-wallet"></i><span data-i18n="charge">Ø´Ø§Ø±Ú˜</span></div>
                <div class="action-btn" id="convertPointsBtn"><i class="fas fa-gift"></i><span data-i18n="convert_points">ØªØ¨Ø¯ÛŒÙ„</span></div>
            </div>

            <div class="search-bar">
                <i class="fas fa-search" style="color: var(--primary);"></i>
                <input type="text" id="searchInput" data-i18n-placeholder="searchPlaceholder" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø®Ø¯Ù…Ø§Øª Ùˆ Ú©Ø§Ù„Ø§Ù‡Ø§...">
            </div>

            <div class="category-scroll" id="mainCategoryList"></div>

            <h3 style="margin-bottom: 15px; font-size: 18px;" data-i18n="latest_ads">Ø¬Ø¯ÛŒØ¯ØªØ±ÛŒÙ†â€ŒÙ‡Ø§</h3>
            <div id="adsGrid"></div>
        </div>

        <div id="favoritesPage" class="page">
            <h3 style="color:var(--primary); margin-bottom:20px;"><i class="fas fa-heart"></i> <span data-i18n="favorites">Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒâ€ŒÙ‡Ø§</span></h3>
            <div id="favoritesGrid"></div>
        </div>

        <div id="profilePage" class="page">
            <div class="profile-section">
                <div class="profile-field">
                    <label data-i18n="tg_username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ØªÙ„Ú¯Ø±Ø§Ù…</label>
                    <input type="text" id="tgUsername" readonly>
                </div>
                <div class="profile-field">
                    <label data-i18n="display_name_label">Ù†Ø§Ù… Ù†Ù…Ø§ÛŒØ´ÛŒ</label>
                    <input type="text" id="displayName" data-i18n-placeholder="display_name_placeholder" placeholder="Ù†Ø§Ù… Ø´Ù…Ø§">
                </div>
                <div class="profile-field">
                    <label data-i18n="country_label">Ú©Ø´ÙˆØ±</label>
                    <select id="country">
                        <option value="IR">ğŸ‡®ğŸ‡· Ø§ÛŒØ±Ø§Ù†</option>
                        <option value="IQ">ğŸ‡®ğŸ‡¶ Ø¹Ø±Ø§Ù‚</option>
                    </select>
                </div>
                <div class="profile-field">
                    <label data-i18n="balance_label">Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ú©ÛŒÙ Ù¾ÙˆÙ„:</label> <span id="profileBalance">0</span> ØªÙˆÙ…Ø§Ù†
                </div>
                <div class="profile-field">
                    <label data-i18n="points_label">Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§:</label> <span id="profilePoints">0</span>
                </div>
                <div class="profile-field">
                    <label data-i18n="referral_link_label">Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª</label>
                    <div class="copy-link-row">
                        <input type="text" id="referralLink" readonly>
                        <button id="copyReferral" class="share-btn" style="width:45px;"><i class="fas fa-copy"></i></button>
                        <button id="shareReferral" class="share-btn"><i class="fas fa-share-alt"></i></button>
                    </div>
                </div>
                <button class="save-profile" id="saveProfile"><i class="fas fa-save"></i> <span data-i18n="save">Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª</span></button>
            </div>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† -->
    <div class="modal" id="adModal">
        <button class="modal-close-btn" onclick="closeModal()"><i class="fas fa-times"></i></button>
        
        <div class="modal-body" style="flex:1; overflow-y:auto;">
            <div class="modal-image-container" id="modalImageContainer">
                <img id="modalMainImage" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†" onclick="openGalleryFromMain()">
                <div class="more-images-btn" id="moreImagesBtn" onclick="openGalleryFromMain()">
                    <i class="fas fa-images"></i> <span id="moreImagesText">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯</span>
                </div>
                <div class="modal-watermark">J-DAR</div>
            </div>

            <div class="modal-content-padding">
                <h1 id="modalTitle" class="modal-title-main">Ø¹Ù†ÙˆØ§Ù† Ø¢Ú¯Ù‡ÛŒ</h1>
                <p id="modalMeta" class="modal-sub-text">Ø¯Ù‚Ø§ÛŒÙ‚ÛŒ Ù¾ÛŒØ´ Ø¯Ø± ØªÙ‡Ø±Ø§Ù†</p>

                <div class="info-row">
                    <span class="label">Ù‚ÛŒÙ…Øª</span>
                    <span id="modalPrice" class="value">ØªÙˆØ§ÙÙ‚ÛŒ</span>
                </div>
                <div class="info-row">
                    <span class="label">Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ</span>
                    <span id="modalCat" class="value">-</span>
                </div>
                <div class="info-row">
                    <span class="label">Ø´Ù‡Ø±</span>
                    <span id="modalCity" class="value">-</span>
                </div>

                <div class="description-box">
                    <h3 style="margin-bottom: 10px; color: #fff;">ØªÙˆØ¶ÛŒØ­Ø§Øª</h3>
                    <p id="modalDesc">ØªÙˆØ¶ÛŒØ­Ø§ØªÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¢Ú¯Ù‡ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
                </div>

                <div id="reviewsContainer" class="review-section"></div>
            </div>
        </div>

        <div class="modal-footer">
            <a id="modalCallBtn" href="#" class="btn-main btn-call">ØªÙ…Ø§Ø³</a>
            <a id="modalWhatsappBtn" href="#" target="_blank" class="btn-main btn-wa">ÙˆØ§ØªØ³Ø§Ù¾</a>
            <a id="modalTelegramBtn" href="#" target="_blank" class="btn-main btn-telegram">ØªÙ„Ú¯Ø±Ø§Ù…</a>
        </div>
    </div>

    <!-- Ù…ÙˆØ¯Ø§Ù„ Ú¯Ø§Ù„Ø±ÛŒ -->
    <div class="gallery-modal" id="galleryModal">
        <div class="gallery-content">
            <div class="gallery-back" id="galleryBack"><i class="fas fa-arrow-right"></i></div>
            <img id="galleryImg" class="gallery-image" src="">
            <div class="gallery-controls">
                <div class="gallery-nav" id="galleryPrev"><i class="fas fa-chevron-right"></i></div>
                <span class="gallery-counter" id="galleryCounter">1/1</span>
                <div class="gallery-nav" id="galleryNext"><i class="fas fa-chevron-left"></i></div>
            </div>
            <div class="gallery-watermark">J-DAR</div>
        </div>
    </div>

    <!-- Ù†Ø§ÙˆØ¨Ø±ÛŒ Ù¾Ø§ÛŒÛŒÙ† -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="home"><i class="fas fa-home"></i><span data-i18n="home">ÙˆÛŒØªØ±ÛŒÙ†</span></div>
        <div class="nav-item" data-page="favorites"><i class="fas fa-heart"></i><span data-i18n="favorites">Ù¾Ø³Ù†Ø¯ÛŒØ¯Ù‡</span></div>
        <div class="nav-item" data-page="profile"><i class="fas fa-user"></i><span data-i18n="profile">Ø¬Ø¯Ø§Ø± Ù…Ù†</span></div>
    </nav>

    <script>
        (function() {
            // ========== ØªÙ‡ÙŠØ¦Ø© Ø¨Ø³ÙŠØ·Ø© ==========
            const tg = window.Telegram?.WebApp;
            if (tg) { tg.expand(); tg.enableClosingConfirmation(); }
            const isTelegram = !!tg;
            const warn = document.getElementById('telegramWarning');
            if (!isTelegram) warn.classList.add('show');

            const BOT_USERNAME = 'AlsouqAlmaftuhiran_bot';
            const API_BASE = 'https://souq-bot.mehdi11eidani.workers.dev';
            const MY_TELEGRAM_ID = 'Mehdi_E_admin';

            let currentLang = localStorage.getItem('jedar_lang') || 'fa';
            let favorites = JSON.parse(localStorage.getItem('jedar_favorites') || '[]');
            let allAds = [];

            const tgUser = tg?.initDataUnsafe?.user;
            const userId = tgUser?.id?.toString();
            if (tgUser) document.getElementById('tgUsername').value = tgUser.username || tgUser.id;

            const countryCodes = { IR: '98', IQ: '964' };

            // ØªØ±Ø¬Ù…Ø© Ù…Ø¨Ø³Ø·Ø©
            const translations = {
                fa: { post_ad: 'Ø«Ø¨Øª Ø¢Ú¯Ù‡ÛŒ', vip_subscription: 'VIP', charge: 'Ø´Ø§Ø±Ú˜', convert_points: 'ØªØ¨Ø¯ÛŒÙ„', searchPlaceholder: 'Ø¬Ø³ØªØ¬Ùˆ...', all: 'Ù‡Ù…Ù‡', no_ads: 'Ø¢Ú¯Ù‡ÛŒâ€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯', balance: 'Ù…ÙˆØ¬ÙˆØ¯ÛŒ', points: 'Ø§Ù…ØªÛŒØ§Ø²', call: 'ØªÙ…Ø§Ø³', whatsapp: 'ÙˆØ§ØªØ³Ø§Ù¾', telegram: 'ØªÙ„Ú¯Ø±Ø§Ù…', save: 'Ø°Ø®ÛŒØ±Ù‡', copyHint: 'Ú©Ù¾ÛŒ Ø´Ø¯', imageCounter: '{current} Ø§Ø² {total}', reviewsCount: 'Ù†Ø¸Ø±', tg_username: 'Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ', display_name_label: 'Ù†Ø§Ù…', display_name_placeholder: 'Ù†Ø§Ù… Ø´Ù…Ø§', country_label: 'Ú©Ø´ÙˆØ±', balance_label: 'Ù…ÙˆØ¬ÙˆØ¯ÛŒ:', points_label: 'Ø§Ù…ØªÛŒØ§Ø²:', referral_link_label: 'Ù„ÛŒÙ†Ú© Ø¯Ø¹ÙˆØª', special_badge: 'Ù†Ø±Ø¯Ø¨Ø§Ù† Ø´Ø¯Ù‡', negotiable: 'ØªÙˆØ§ÙÙ‚ÛŒ', more_images: 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯' },
                ar: { post_ad: 'Ø¥Ø¹Ù„Ø§Ù†', vip_subscription: 'VIP', charge: 'Ø´Ø­Ù†', convert_points: 'ØªØ­ÙˆÙŠÙ„', searchPlaceholder: 'Ø§Ø¨Ø­Ø«...', all: 'Ø§Ù„ÙƒÙ„', no_ads: 'Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª', balance: 'Ø§Ù„Ø±ØµÙŠØ¯', points: 'Ø§Ù„Ù†Ù‚Ø§Ø·', call: 'Ø§ØªØµØ§Ù„', whatsapp: 'ÙˆØ§ØªØ³Ø§Ø¨', telegram: 'ØªÙ„ØºØ±Ø§Ù…', save: 'Ø­ÙØ¸', copyHint: 'ØªÙ… Ø§Ù„Ù†Ø³Ø®', imageCounter: '{current} Ù…Ù† {total}', reviewsCount: 'Ø±Ø£ÙŠ', tg_username: 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', display_name_label: 'Ø§Ù„Ø§Ø³Ù…', display_name_placeholder: 'Ø§Ø³Ù…Ùƒ', country_label: 'Ø§Ù„Ø¯ÙˆÙ„Ø©', balance_label: 'Ø§Ù„Ø±ØµÙŠØ¯:', points_label: 'Ù†Ù‚Ø§Ø·Ùƒ:', referral_link_label: 'Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯Ø¹ÙˆØ©', special_badge: 'Ù…Ù…ÙŠØ²', negotiable: 'Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙØ§ÙˆØ¶', more_images: 'Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯' },
                en: { post_ad: 'Post Ad', vip_subscription: 'VIP', charge: 'Charge', convert_points: 'Convert', searchPlaceholder: 'Search...', all: 'All', no_ads: 'No ads', balance: 'Balance', points: 'Points', call: 'Call', whatsapp: 'WhatsApp', telegram: 'Telegram', save: 'Save', copyHint: 'Copied', imageCounter: '{current} of {total}', reviewsCount: 'reviews', tg_username: 'Username', display_name_label: 'Name', display_name_placeholder: 'Your name', country_label: 'Country', balance_label: 'Balance:', points_label: 'Points:', referral_link_label: 'Referral link', special_badge: 'Promoted', negotiable: 'Negotiable', more_images: 'View more' }
            };

            function t(key) { return translations[currentLang]?.[key] || key; }

            // ========== Ø¯Ø§Ù„Ø© ÙØªØ­ Ø§Ù„Ø¨ÙˆØª (Ù…Ø¨Ø³Ø·Ø©) ==========
            function openBot() {
                const url = `https://t.me/${BOT_USERNAME}`;
                if (tg) {
                    tg.openTelegramLink(url);
                } else {
                    window.open(url, '_blank');
                }
            }

            // ========== Ø±Ø¨Ø· Ø§Ù„Ø£Ø²Ø±Ø§Ø± ==========
            document.getElementById('postAdBtn').addEventListener('click', openBot);
            document.getElementById('vipBtn').addEventListener('click', openBot);
            document.getElementById('chargeBtn').addEventListener('click', openBot);
            document.getElementById('convertPointsBtn').addEventListener('click', openBot);

            // Ø¨Ù‚ÙŠØ© Ø§Ù„Ø£Ø²Ø±Ø§Ø± (Ù…Ø«Ù„ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ) ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ Ø·Ø¨ÙŠØ¹ÙŠ
            document.getElementById('saveProfile').addEventListener('click', () => {
                alert('ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹');
            });

            // ========== Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙƒÙˆØ¯ (Ø§Ù„ØµÙˆØ±ØŒ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§ØªØŒ Ø¥Ù„Ø®) ==========
            // (Ø³Ø£Ø®ØªØµØ± Ø¨Ù‚ÙŠØ© Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¹ Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©)
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø¯ÙˆØ§Ù„ ÙƒÙ…Ø§ Ù‡ÙŠ Ù…Ù† Ø§Ù„Ø¥ØµØ¯Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© ÙˆÙ„ÙƒÙ† Ù…Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ² Ø¹Ù„Ù‰ Ø£Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†.

            // Ù…Ù„Ø§Ø­Ø¸Ø©: Ù‡Ø°Ø§ Ø§Ù„ÙƒÙˆØ¯ Ù…Ø¨Ø³Ø· Ø¬Ø¯Ø§Ù‹ ÙˆÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¶Ø§ÙØ© Ø¯ÙˆØ§Ù„ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙˆØ¹Ø±Ø¶Ù‡Ø§ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„.
            // Ù„ÙƒÙ† Ø§Ù„Ù‡Ø¯Ù Ù‡Ùˆ Ø¥Ø«Ø¨Ø§Øª Ø£Ù† Ø§Ù„Ø£Ø²Ø±Ø§Ø± ØªØ¹Ù…Ù„.

            // Ø¥Ø¶Ø§ÙØ© Ù…Ø¤Ù‚Øª Ù„Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            alert('Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø¢Ù† ØªÙØªØ­ Ø§Ù„Ø¨ÙˆØª Ù…Ø¨Ø§Ø´Ø±Ø© (Ø¨Ø¯ÙˆÙ† Ø£ÙˆØ§Ù…Ø±)');
        })();
    </script>
</body>
</html>
